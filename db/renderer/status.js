import { ipcRenderer } from 'electron';
import * as log from 'electron-log';
import React, { useEffect, useState } from 'react';
import { Spinner } from '@blueprintjs/core';
import { useIPCValue } from '../../ipc/renderer';
import styles from './status.scss';
export const DatabaseList = function ({ databases, databaseStatusComponents }) {
    const [dbs, updateDBs] = useState({});
    useEffect(() => {
        (async () => {
            for (const [dbID, meta] of Object.entries(databases)) {
                const backendDetailsComponentResolver = async () => (await databaseStatusComponents[dbID]()).default;
                updateDBs(Object.assign(Object.assign({}, dbs), { [dbID]: { meta, backendDetailsComponentResolver } }));
            }
        })();
    }, []);
    return (React.createElement(React.Fragment, null, Object.entries(dbs).map(([dbID, dbData]) => React.createElement(DBStatus, { key: dbID, dbName: dbID, meta: dbData.meta, backendDetailsComponentResolver: dbData.backendDetailsComponentResolver }))));
};
export const DBStatus = function ({ dbName, meta, backendDetailsComponentResolver }) {
    var _a, _b;
    const description = useIPCValue(`db-${dbName}-describe`, null);
    const [status, updateStatus] = useState(null);
    const [BackendDetails, setBackendDetailsComponent] = useState(null);
    const ipcPrefix = `db-${dbName}`;
    // TODO: Redo pluggable backend widget? Move most of the presentation here;
    // make backend provide context provider component with actions & info.
    useEffect(() => {
        // Fetch component configured to display this DB status appropriately
        (async () => {
            const BackendDetails = (await backendDetailsComponentResolver());
            log.debug("Resolved backend details widget", BackendDetails);
            setBackendDetailsComponent(() => BackendDetails);
        })();
        // Listen to status updates
        function handleNewStatus(evt, newStatus) {
            log.debug("Received new status for DB", dbName, newStatus);
            updateStatus(newStatus);
        }
        ipcRenderer.on(`${ipcPrefix}-status`, handleNewStatus);
        return function cleanup() {
            ipcRenderer.removeListener(`${ipcPrefix}-status`, handleNewStatus);
        };
    }, []);
    if (description.value !== null && BackendDetails !== null) {
        log.silly("Rendering DB status widget for", dbName, meta.verboseName, description.value, status);
        log.silly("Using widget", BackendDetails);
    }
    const backendType = (_a = description.value) === null || _a === void 0 ? void 0 : _a.verboseName;
    return (React.createElement("div", { className: `
        ${styles.base}
        ${BackendDetails === null ? styles.widgetLoading : ''}
        ${description.value === null ? styles.descriptionLoading : ''}` },
        React.createElement("div", { className: styles.dbLabel },
            React.createElement("span", { className: styles.dbName }, meta.verboseName),
            backendType
                ? React.createElement("span", { className: styles.backendType }, backendType)
                : null),
        React.createElement("div", { className: styles.backendDetails }, description.value !== null && BackendDetails !== null
            ? React.createElement(BackendDetails, { dbIPCPrefix: ipcPrefix, status: status || ((_b = description.value) === null || _b === void 0 ? void 0 : _b.status), description: description.value })
            : React.createElement(Spinner, null))));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdHVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2RiL3JlbmRlcmVyL3N0YXR1cy50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUN2QyxPQUFPLEtBQUssR0FBRyxNQUFNLGNBQWMsQ0FBQztBQUVwQyxPQUFPLEtBQUssRUFBRSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxPQUFPLENBQUM7QUFDbkQsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBSTVDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUdqRCxPQUFPLE1BQU0sTUFBTSxlQUFlLENBQUM7QUFTbkMsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUN6QixVQUFVLEVBQUUsU0FBUyxFQUFFLHdCQUF3QixFQUFFO0lBUS9DLE1BQU0sQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLEdBQUcsUUFBUSxDQUFDLEVBQWUsQ0FBQyxDQUFDO0lBRW5ELFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ1YsS0FBSyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUU7Z0JBQ3BELE1BQU0sK0JBQStCLEdBQ25DLEtBQUssSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLHdCQUF3QixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUM7Z0JBQy9ELFNBQVMsaUNBQU0sR0FBRyxLQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsK0JBQStCLEVBQUUsSUFBRSxDQUFBO2FBQ3hFO1FBQ0gsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNQLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUVQLE9BQU8sQ0FDTCww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QUFFLE1BQU0sQ0FBQyxXQUFXLElBQUcsV0FBVyxDQUFRO2dCQUMzRCxDQUFDLENBQUMsSUFBSSxDQUNKO1FBRU4sNkJBQUssU0FBUyxFQUFFLE1BQU0sQ0FBQyxjQUFjLElBQ2xDLFdBQVcsQ0FBQyxLQUFLLEtBQUssSUFBSSxJQUFJLGNBQWMsS0FBSyxJQUFJO1lBQ3BELENBQUMsQ0FBQyxvQkFBQyxjQUFjLElBQ2IsV0FBVyxFQUFFLFNBQVMsRUFDdEIsTUFBTSxFQUFFLE1BQU0sV0FBSSxXQUFXLENBQUMsS0FBSywwQ0FBRSxNQUFNLENBQUEsRUFDM0MsV0FBVyxFQUFFLFdBQVcsQ0FBQyxLQUFLLEdBQUk7WUFDdEMsQ0FBQyxDQUFDLG9CQUFDLE9BQU8sT0FBRyxDQUNYLENBQ0YsQ0FDUCxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXBjUmVuZGVyZXIgfSBmcm9tICdlbGVjdHJvbic7XG5pbXBvcnQgKiBhcyBsb2cgZnJvbSAnZWxlY3Ryb24tbG9nJztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSAnQGJsdWVwcmludGpzL2NvcmUnO1xuXG5pbXBvcnQgeyBBcHBDb25maWcsIERhdGFiYXNlSW5mbyB9IGZyb20gJy4uLy4uL2NvbmZpZy9hcHAnO1xuaW1wb3J0IHsgUmVuZGVyZXJDb25maWcsIERhdGFiYXNlU3RhdHVzQ29tcG9uZW50UHJvcHMgfSBmcm9tICcuLi8uLi9jb25maWcvcmVuZGVyZXInO1xuaW1wb3J0IHsgdXNlSVBDVmFsdWUgfSBmcm9tICcuLi8uLi9pcGMvcmVuZGVyZXInO1xuaW1wb3J0IHsgQmFja2VuZERlc2NyaXB0aW9uIH0gZnJvbSAnLi4vYmFzZSc7XG5cbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9zdGF0dXMuc2Nzcyc7XG5cblxudHlwZSBVbmtub3duREJTdGF0dXNDb21wb25lbnQgPSBSZWFjdC5GQzxEYXRhYmFzZVN0YXR1c0NvbXBvbmVudFByb3BzPGFueSwgYW55Pj47XG5cbmludGVyZmFjZSBEYXRhYmFzZUxpc3RQcm9wcyB7XG4gIGRhdGFiYXNlczogQXBwQ29uZmlnW1wiZGF0YWJhc2VzXCJdXG4gIGRhdGFiYXNlU3RhdHVzQ29tcG9uZW50czogUmVuZGVyZXJDb25maWc8YW55PltcImRhdGFiYXNlU3RhdHVzQ29tcG9uZW50c1wiXVxufVxuZXhwb3J0IGNvbnN0IERhdGFiYXNlTGlzdDogUmVhY3QuRkM8RGF0YWJhc2VMaXN0UHJvcHM+ID1cbmZ1bmN0aW9uICh7IGRhdGFiYXNlcywgZGF0YWJhc2VTdGF0dXNDb21wb25lbnRzIH0pIHtcbiAgdHlwZSBEYXRhYmFzZXMgPSB7XG4gICAgW2RiTmFtZSBpbiBrZXlvZiB0eXBlb2YgZGF0YWJhc2VzXToge1xuICAgICAgbWV0YTogRGF0YWJhc2VJbmZvXG4gICAgICBiYWNrZW5kRGV0YWlsc0NvbXBvbmVudFJlc29sdmVyOlxuICAgICAgICAoKSA9PiBQcm9taXNlPFVua25vd25EQlN0YXR1c0NvbXBvbmVudD5cbiAgICB9XG4gIH07XG4gIGNvbnN0IFtkYnMsIHVwZGF0ZURCc10gPSB1c2VTdGF0ZSh7fSBhcyBEYXRhYmFzZXMpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgKGFzeW5jICgpID0+IHtcbiAgICAgIGZvciAoY29uc3QgW2RiSUQsIG1ldGFdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGFiYXNlcykpIHtcbiAgICAgICAgY29uc3QgYmFja2VuZERldGFpbHNDb21wb25lbnRSZXNvbHZlciA9XG4gICAgICAgICAgYXN5bmMgKCkgPT4gKGF3YWl0IGRhdGFiYXNlU3RhdHVzQ29tcG9uZW50c1tkYklEXSgpKS5kZWZhdWx0O1xuICAgICAgICB1cGRhdGVEQnMoeyAuLi5kYnMsIFtkYklEXTogeyBtZXRhLCBiYWNrZW5kRGV0YWlsc0NvbXBvbmVudFJlc29sdmVyIH19KVxuICAgICAgfVxuICAgIH0pKCk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7T2JqZWN0LmVudHJpZXMoZGJzKS5tYXAoKFtkYklELCBkYkRhdGFdKSA9PlxuICAgICAgICA8REJTdGF0dXNcbiAgICAgICAgICBrZXk9e2RiSUR9XG4gICAgICAgICAgZGJOYW1lPXtkYklEfVxuICAgICAgICAgIG1ldGE9e2RiRGF0YS5tZXRhfVxuICAgICAgICAgIGJhY2tlbmREZXRhaWxzQ29tcG9uZW50UmVzb2x2ZXI9e2RiRGF0YS5iYWNrZW5kRGV0YWlsc0NvbXBvbmVudFJlc29sdmVyfVxuICAgICAgICAvPil9XG4gICAgPC8+XG4gICk7XG59O1xuXG5cbmludGVyZmFjZSBEQlN0YXR1c1Byb3BzIHtcbiAgZGJOYW1lOiBzdHJpbmdcbiAgbWV0YTogRGF0YWJhc2VJbmZvXG4gIGJhY2tlbmREZXRhaWxzQ29tcG9uZW50UmVzb2x2ZXI6ICgpID0+IFByb21pc2U8VW5rbm93bkRCU3RhdHVzQ29tcG9uZW50PlxufVxuZXhwb3J0IGNvbnN0IERCU3RhdHVzOiBSZWFjdC5GQzxEQlN0YXR1c1Byb3BzPiA9IGZ1bmN0aW9uICh7IGRiTmFtZSwgbWV0YSwgYmFja2VuZERldGFpbHNDb21wb25lbnRSZXNvbHZlciB9KSB7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gdXNlSVBDVmFsdWUoYGRiLSR7ZGJOYW1lfS1kZXNjcmliZWAsIG51bGwgYXMgbnVsbCB8IEJhY2tlbmREZXNjcmlwdGlvbjxhbnk+KTtcbiAgY29uc3QgW3N0YXR1cywgdXBkYXRlU3RhdHVzXSA9IHVzZVN0YXRlKG51bGwgYXMgbnVsbCB8IG9iamVjdCk7XG4gIGNvbnN0IFtCYWNrZW5kRGV0YWlscywgc2V0QmFja2VuZERldGFpbHNDb21wb25lbnRdID0gdXNlU3RhdGUobnVsbCBhcyAobnVsbCB8ICgoKSA9PiBVbmtub3duREJTdGF0dXNDb21wb25lbnQpKSk7XG4gIGNvbnN0IGlwY1ByZWZpeCA9IGBkYi0ke2RiTmFtZX1gO1xuXG4gIC8vIFRPRE86IFJlZG8gcGx1Z2dhYmxlIGJhY2tlbmQgd2lkZ2V0PyBNb3ZlIG1vc3Qgb2YgdGhlIHByZXNlbnRhdGlvbiBoZXJlO1xuICAvLyBtYWtlIGJhY2tlbmQgcHJvdmlkZSBjb250ZXh0IHByb3ZpZGVyIGNvbXBvbmVudCB3aXRoIGFjdGlvbnMgJiBpbmZvLlxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gRmV0Y2ggY29tcG9uZW50IGNvbmZpZ3VyZWQgdG8gZGlzcGxheSB0aGlzIERCIHN0YXR1cyBhcHByb3ByaWF0ZWx5XG4gICAgKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IEJhY2tlbmREZXRhaWxzID0gKGF3YWl0IGJhY2tlbmREZXRhaWxzQ29tcG9uZW50UmVzb2x2ZXIoKSk7XG4gICAgICBsb2cuZGVidWcoXCJSZXNvbHZlZCBiYWNrZW5kIGRldGFpbHMgd2lkZ2V0XCIsIEJhY2tlbmREZXRhaWxzKVxuICAgICAgc2V0QmFja2VuZERldGFpbHNDb21wb25lbnQoKCkgPT4gQmFja2VuZERldGFpbHMpO1xuICAgIH0pKCk7XG5cbiAgICAvLyBMaXN0ZW4gdG8gc3RhdHVzIHVwZGF0ZXNcbiAgICBmdW5jdGlvbiBoYW5kbGVOZXdTdGF0dXMoZXZ0OiBhbnksIG5ld1N0YXR1czogYW55KSB7XG4gICAgICBsb2cuZGVidWcoXCJSZWNlaXZlZCBuZXcgc3RhdHVzIGZvciBEQlwiLCBkYk5hbWUsIG5ld1N0YXR1cyk7XG4gICAgICB1cGRhdGVTdGF0dXMobmV3U3RhdHVzKTtcbiAgICB9XG4gICAgaXBjUmVuZGVyZXIub24oYCR7aXBjUHJlZml4fS1zdGF0dXNgLCBoYW5kbGVOZXdTdGF0dXMpO1xuICAgIHJldHVybiBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgaXBjUmVuZGVyZXIucmVtb3ZlTGlzdGVuZXIoYCR7aXBjUHJlZml4fS1zdGF0dXNgLCBoYW5kbGVOZXdTdGF0dXMpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGlmIChkZXNjcmlwdGlvbi52YWx1ZSAhPT0gbnVsbCAmJiBCYWNrZW5kRGV0YWlscyAhPT0gbnVsbCkge1xuICAgIGxvZy5zaWxseShcIlJlbmRlcmluZyBEQiBzdGF0dXMgd2lkZ2V0IGZvclwiLCBkYk5hbWUsIG1ldGEudmVyYm9zZU5hbWUsIGRlc2NyaXB0aW9uLnZhbHVlLCBzdGF0dXMpO1xuICAgIGxvZy5zaWxseShcIlVzaW5nIHdpZGdldFwiLCBCYWNrZW5kRGV0YWlscyk7XG4gIH1cblxuICBjb25zdCBiYWNrZW5kVHlwZSA9IGRlc2NyaXB0aW9uLnZhbHVlPy52ZXJib3NlTmFtZTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgXG4gICAgICAgICR7c3R5bGVzLmJhc2V9XG4gICAgICAgICR7QmFja2VuZERldGFpbHMgPT09IG51bGwgPyBzdHlsZXMud2lkZ2V0TG9hZGluZyA6ICcnfVxuICAgICAgICAke2Rlc2NyaXB0aW9uLnZhbHVlID09PSBudWxsID8gc3R5bGVzLmRlc2NyaXB0aW9uTG9hZGluZyA6ICcnfWB9PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmRiTGFiZWx9PlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3N0eWxlcy5kYk5hbWV9PnttZXRhLnZlcmJvc2VOYW1lfTwvc3Bhbj5cblxuICAgICAgICB7YmFja2VuZFR5cGVcbiAgICAgICAgICA/IDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzLmJhY2tlbmRUeXBlfT57YmFja2VuZFR5cGV9PC9zcGFuPlxuICAgICAgICAgIDogbnVsbH1cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmJhY2tlbmREZXRhaWxzfT5cbiAgICAgICAge2Rlc2NyaXB0aW9uLnZhbHVlICE9PSBudWxsICYmIEJhY2tlbmREZXRhaWxzICE9PSBudWxsXG4gICAgICAgICAgPyA8QmFja2VuZERldGFpbHNcbiAgICAgICAgICAgICAgZGJJUENQcmVmaXg9e2lwY1ByZWZpeH1cbiAgICAgICAgICAgICAgc3RhdHVzPXtzdGF0dXMgfHwgZGVzY3JpcHRpb24udmFsdWU/LnN0YXR1c31cbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249e2Rlc2NyaXB0aW9uLnZhbHVlfSAvPlxuICAgICAgICAgIDogPFNwaW5uZXIgLz59XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG4iXX0=