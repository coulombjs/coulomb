import { ipcRenderer } from 'electron';
import * as log from 'electron-log';
import React, { useEffect, useState } from 'react';
import { FormGroup, Classes } from '@blueprintjs/core';
import { useIPCValue } from '../../ipc/renderer';
import styles from './status.scss';
export const DatabaseList = function ({ databases, databaseStatusComponents }) {
    const [dbs, updateDBs] = useState({});
    useEffect(() => {
        (async () => {
            for (const [dbID, meta] of Object.entries(databases)) {
                const backendDetailsComponentResolver = async () => (await databaseStatusComponents[dbID]()).default;
                updateDBs(Object.assign(Object.assign({}, dbs), { [dbID]: { meta, backendDetailsComponentResolver } }));
            }
        })();
    }, []);
    return (React.createElement(React.Fragment, null, Object.entries(dbs).map(([dbID, dbData]) => React.createElement(DBStatus, { key: dbID, dbName: dbID, meta: dbData.meta, backendDetailsComponentResolver: dbData.backendDetailsComponentResolver }))));
};
export const DBStatus = function ({ dbName, meta, backendDetailsComponentResolver }) {
    var _a;
    const description = useIPCValue(`db-${dbName}-describe`, null);
    const [status, updateStatus] = useState(null);
    const [BackendDetails, setBackendDetailsComponent] = useState(null);
    const ipcPrefix = `db-${dbName}`;
    // TODO: Redo pluggable backend widget? Move most of the presentation here;
    // make backend provide context provider component with actions & info.
    useEffect(() => {
        // Fetch component configured to display this DB status appropriately
        (async () => {
            const BackendDetails = (await backendDetailsComponentResolver());
            log.debug("Resolved backend details widget", BackendDetails);
            setBackendDetailsComponent(() => BackendDetails);
        })();
        // Listen to status updates
        function handleNewStatus(evt, newStatus) {
            log.debug("Received new status for DB", dbName, newStatus);
            updateStatus(newStatus);
        }
        ipcRenderer.on(`${ipcPrefix}-status`, handleNewStatus);
        return function cleanup() {
            ipcRenderer.removeListener(`${ipcPrefix}-status`, handleNewStatus);
        };
    }, []);
    if (description.value !== null && BackendDetails !== null) {
        log.silly("Rendering DB status widget for", dbName, meta.verboseName, description.value, status);
        log.silly("Using widget", BackendDetails);
    }
    const backendData = description.value;
    const backendView = backendData !== null
        ? React.createElement("span", { className: styles.backendType, title: backendData.verboseNameLong }, backendData.verboseName)
        : React.createElement("span", { className: Classes.SKELETON }, "Loading\u2026");
    return (React.createElement(FormGroup, { className: `
          ${styles.base}
          ${BackendDetails === null ? styles.widgetLoading : ''}
          ${description.value === null ? styles.descriptionLoading : ''}`, label: meta.verboseName, labelInfo: backendView },
        React.createElement("div", { className: styles.backendDetails }, description.value !== null && BackendDetails !== null
            ? React.createElement(BackendDetails, { dbIPCPrefix: ipcPrefix, status: status || ((_a = description.value) === null || _a === void 0 ? void 0 : _a.status), description: description.value })
            : React.createElement("div", { className: Classes.SKELETON }, "Loading\u2026"))));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdHVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2RiL3JlbmRlcmVyL3N0YXR1cy50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUN2QyxPQUFPLEtBQUssR0FBRyxNQUFNLGNBQWMsQ0FBQztBQUVwQyxPQUFPLEtBQUssRUFBRSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxPQUFPLENBQUM7QUFDbkQsT0FBTyxFQUFNLFNBQVMsRUFBRSxPQUFPLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUkzRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFHakQsT0FBTyxNQUFNLE1BQU0sZUFBZSxDQUFDO0FBU25DLE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FDekIsVUFBVSxFQUFFLFNBQVMsRUFBRSx3QkFBd0IsRUFBRTtJQVEvQyxNQUFNLENBQUMsR0FBRyxFQUFFLFNBQVMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxFQUFlLENBQUMsQ0FBQztJQUVuRCxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsQ0FBQyxLQUFLLElBQUksRUFBRTtZQUNWLEtBQUssTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxFQUFFO2dCQUNwRCxNQUFNLCtCQUErQixHQUNuQyxLQUFLLElBQUksRUFBRSxDQUFDLENBQUMsTUFBTSx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDO2dCQUMvRCxTQUFTLGlDQUFNLEdBQUcsS0FBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLCtCQUErQixFQUFFLElBQUUsQ0FBQTthQUN4RTtRQUNILENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDUCxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFUCxP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QUssS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQ2pFLEtBQUssRUFBRSxJQUFJLENBQUMsV0FBVyxFQUN2QixTQUFTLEVBQUUsV0FBVztRQUV4Qiw2QkFBSyxTQUFTLEVBQUUsTUFBTSxDQUFDLGNBQWMsSUFDbEMsV0FBVyxDQUFDLEtBQUssS0FBSyxJQUFJLElBQUksY0FBYyxLQUFLLElBQUk7WUFDcEQsQ0FBQyxDQUFDLG9CQUFDLGNBQWMsSUFDYixXQUFXLEVBQUUsU0FBUyxFQUN0QixNQUFNLEVBQUUsTUFBTSxXQUFJLFdBQVcsQ0FBQyxLQUFLLDBDQUFFLE1BQU0sQ0FBQSxFQUMzQyxXQUFXLEVBQUUsV0FBVyxDQUFDLEtBQUssR0FBSTtZQUN0QyxDQUFDLENBQUMsNkJBQUssU0FBUyxFQUFFLE9BQU8sQ0FBQyxRQUFRLG9CQUFnQixDQUNoRCxDQUNJLENBQ2IsQ0FBQztBQUNKLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlwY1JlbmRlcmVyIH0gZnJvbSAnZWxlY3Ryb24nO1xuaW1wb3J0ICogYXMgbG9nIGZyb20gJ2VsZWN0cm9uLWxvZyc7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgSDQsIEZvcm1Hcm91cCwgQ2xhc3NlcyB9IGZyb20gJ0BibHVlcHJpbnRqcy9jb3JlJztcblxuaW1wb3J0IHsgQXBwQ29uZmlnLCBEYXRhYmFzZUluZm8gfSBmcm9tICcuLi8uLi9jb25maWcvYXBwJztcbmltcG9ydCB7IFJlbmRlcmVyQ29uZmlnLCBEYXRhYmFzZVN0YXR1c0NvbXBvbmVudFByb3BzIH0gZnJvbSAnLi4vLi4vY29uZmlnL3JlbmRlcmVyJztcbmltcG9ydCB7IHVzZUlQQ1ZhbHVlIH0gZnJvbSAnLi4vLi4vaXBjL3JlbmRlcmVyJztcbmltcG9ydCB7IEJhY2tlbmREZXNjcmlwdGlvbiB9IGZyb20gJy4uL2Jhc2UnO1xuXG5pbXBvcnQgc3R5bGVzIGZyb20gJy4vc3RhdHVzLnNjc3MnO1xuXG5cbnR5cGUgVW5rbm93bkRCU3RhdHVzQ29tcG9uZW50ID0gUmVhY3QuRkM8RGF0YWJhc2VTdGF0dXNDb21wb25lbnRQcm9wczxhbnksIGFueT4+O1xuXG5pbnRlcmZhY2UgRGF0YWJhc2VMaXN0UHJvcHMge1xuICBkYXRhYmFzZXM6IEFwcENvbmZpZ1tcImRhdGFiYXNlc1wiXVxuICBkYXRhYmFzZVN0YXR1c0NvbXBvbmVudHM6IFJlbmRlcmVyQ29uZmlnPGFueT5bXCJkYXRhYmFzZVN0YXR1c0NvbXBvbmVudHNcIl1cbn1cbmV4cG9ydCBjb25zdCBEYXRhYmFzZUxpc3Q6IFJlYWN0LkZDPERhdGFiYXNlTGlzdFByb3BzPiA9XG5mdW5jdGlvbiAoeyBkYXRhYmFzZXMsIGRhdGFiYXNlU3RhdHVzQ29tcG9uZW50cyB9KSB7XG4gIHR5cGUgRGF0YWJhc2VzID0ge1xuICAgIFtkYk5hbWUgaW4ga2V5b2YgdHlwZW9mIGRhdGFiYXNlc106IHtcbiAgICAgIG1ldGE6IERhdGFiYXNlSW5mb1xuICAgICAgYmFja2VuZERldGFpbHNDb21wb25lbnRSZXNvbHZlcjpcbiAgICAgICAgKCkgPT4gUHJvbWlzZTxVbmtub3duREJTdGF0dXNDb21wb25lbnQ+XG4gICAgfVxuICB9O1xuICBjb25zdCBbZGJzLCB1cGRhdGVEQnNdID0gdXNlU3RhdGUoe30gYXMgRGF0YWJhc2VzKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IFtkYklELCBtZXRhXSBvZiBPYmplY3QuZW50cmllcyhkYXRhYmFzZXMpKSB7XG4gICAgICAgIGNvbnN0IGJhY2tlbmREZXRhaWxzQ29tcG9uZW50UmVzb2x2ZXIgPVxuICAgICAgICAgIGFzeW5jICgpID0+IChhd2FpdCBkYXRhYmFzZVN0YXR1c0NvbXBvbmVudHNbZGJJRF0oKSkuZGVmYXVsdDtcbiAgICAgICAgdXBkYXRlREJzKHsgLi4uZGJzLCBbZGJJRF06IHsgbWV0YSwgYmFja2VuZERldGFpbHNDb21wb25lbnRSZXNvbHZlciB9fSlcbiAgICAgIH1cbiAgICB9KSgpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAge09iamVjdC5lbnRyaWVzKGRicykubWFwKChbZGJJRCwgZGJEYXRhXSkgPT5cbiAgICAgICAgPERCU3RhdHVzXG4gICAgICAgICAga2V5PXtkYklEfVxuICAgICAgICAgIGRiTmFtZT17ZGJJRH1cbiAgICAgICAgICBtZXRhPXtkYkRhdGEubWV0YX1cbiAgICAgICAgICBiYWNrZW5kRGV0YWlsc0NvbXBvbmVudFJlc29sdmVyPXtkYkRhdGEuYmFja2VuZERldGFpbHNDb21wb25lbnRSZXNvbHZlcn1cbiAgICAgICAgLz4pfVxuICAgIDwvPlxuICApO1xufTtcblxuXG5pbnRlcmZhY2UgREJTdGF0dXNQcm9wcyB7XG4gIGRiTmFtZTogc3RyaW5nXG4gIG1ldGE6IERhdGFiYXNlSW5mb1xuICBiYWNrZW5kRGV0YWlsc0NvbXBvbmVudFJlc29sdmVyOiAoKSA9PiBQcm9taXNlPFVua25vd25EQlN0YXR1c0NvbXBvbmVudD5cbn1cbmV4cG9ydCBjb25zdCBEQlN0YXR1czogUmVhY3QuRkM8REJTdGF0dXNQcm9wcz4gPSBmdW5jdGlvbiAoeyBkYk5hbWUsIG1ldGEsIGJhY2tlbmREZXRhaWxzQ29tcG9uZW50UmVzb2x2ZXIgfSkge1xuICBjb25zdCBkZXNjcmlwdGlvbiA9IHVzZUlQQ1ZhbHVlKGBkYi0ke2RiTmFtZX0tZGVzY3JpYmVgLCBudWxsIGFzIG51bGwgfCBCYWNrZW5kRGVzY3JpcHRpb248YW55Pik7XG4gIGNvbnN0IFtzdGF0dXMsIHVwZGF0ZVN0YXR1c10gPSB1c2VTdGF0ZShudWxsIGFzIG51bGwgfCBvYmplY3QpO1xuICBjb25zdCBbQmFja2VuZERldGFpbHMsIHNldEJhY2tlbmREZXRhaWxzQ29tcG9uZW50XSA9IHVzZVN0YXRlKG51bGwgYXMgKG51bGwgfCAoKCkgPT4gVW5rbm93bkRCU3RhdHVzQ29tcG9uZW50KSkpO1xuICBjb25zdCBpcGNQcmVmaXggPSBgZGItJHtkYk5hbWV9YDtcblxuICAvLyBUT0RPOiBSZWRvIHBsdWdnYWJsZSBiYWNrZW5kIHdpZGdldD8gTW92ZSBtb3N0IG9mIHRoZSBwcmVzZW50YXRpb24gaGVyZTtcbiAgLy8gbWFrZSBiYWNrZW5kIHByb3ZpZGUgY29udGV4dCBwcm92aWRlciBjb21wb25lbnQgd2l0aCBhY3Rpb25zICYgaW5mby5cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEZldGNoIGNvbXBvbmVudCBjb25maWd1cmVkIHRvIGRpc3BsYXkgdGhpcyBEQiBzdGF0dXMgYXBwcm9wcmlhdGVseVxuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBCYWNrZW5kRGV0YWlscyA9IChhd2FpdCBiYWNrZW5kRGV0YWlsc0NvbXBvbmVudFJlc29sdmVyKCkpO1xuICAgICAgbG9nLmRlYnVnKFwiUmVzb2x2ZWQgYmFja2VuZCBkZXRhaWxzIHdpZGdldFwiLCBCYWNrZW5kRGV0YWlscylcbiAgICAgIHNldEJhY2tlbmREZXRhaWxzQ29tcG9uZW50KCgpID0+IEJhY2tlbmREZXRhaWxzKTtcbiAgICB9KSgpO1xuXG4gICAgLy8gTGlzdGVuIHRvIHN0YXR1cyB1cGRhdGVzXG4gICAgZnVuY3Rpb24gaGFuZGxlTmV3U3RhdHVzKGV2dDogYW55LCBuZXdTdGF0dXM6IGFueSkge1xuICAgICAgbG9nLmRlYnVnKFwiUmVjZWl2ZWQgbmV3IHN0YXR1cyBmb3IgREJcIiwgZGJOYW1lLCBuZXdTdGF0dXMpO1xuICAgICAgdXBkYXRlU3RhdHVzKG5ld1N0YXR1cyk7XG4gICAgfVxuICAgIGlwY1JlbmRlcmVyLm9uKGAke2lwY1ByZWZpeH0tc3RhdHVzYCwgaGFuZGxlTmV3U3RhdHVzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICAgIGlwY1JlbmRlcmVyLnJlbW92ZUxpc3RlbmVyKGAke2lwY1ByZWZpeH0tc3RhdHVzYCwgaGFuZGxlTmV3U3RhdHVzKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBpZiAoZGVzY3JpcHRpb24udmFsdWUgIT09IG51bGwgJiYgQmFja2VuZERldGFpbHMgIT09IG51bGwpIHtcbiAgICBsb2cuc2lsbHkoXCJSZW5kZXJpbmcgREIgc3RhdHVzIHdpZGdldCBmb3JcIiwgZGJOYW1lLCBtZXRhLnZlcmJvc2VOYW1lLCBkZXNjcmlwdGlvbi52YWx1ZSwgc3RhdHVzKTtcbiAgICBsb2cuc2lsbHkoXCJVc2luZyB3aWRnZXRcIiwgQmFja2VuZERldGFpbHMpO1xuICB9XG5cbiAgY29uc3QgYmFja2VuZERhdGEgPSBkZXNjcmlwdGlvbi52YWx1ZTtcblxuICBjb25zdCBiYWNrZW5kVmlldzogSlNYLkVsZW1lbnQgPSBiYWNrZW5kRGF0YSAhPT0gbnVsbFxuICAgID8gPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXMuYmFja2VuZFR5cGV9IHRpdGxlPXtiYWNrZW5kRGF0YS52ZXJib3NlTmFtZUxvbmd9PlxuICAgICAgICB7YmFja2VuZERhdGEudmVyYm9zZU5hbWV9XG4gICAgICA8L3NwYW4+XG4gICAgOiA8c3BhbiBjbGFzc05hbWU9e0NsYXNzZXMuU0tFTEVUT059PkxvYWRpbmfigKY8L3NwYW4+O1xuXG4gIHJldHVybiAoXG4gICAgPEZvcm1Hcm91cFxuICAgICAgICBjbGFzc05hbWU9e2BcbiAgICAgICAgICAke3N0eWxlcy5iYXNlfVxuICAgICAgICAgICR7QmFja2VuZERldGFpbHMgPT09IG51bGwgPyBzdHlsZXMud2lkZ2V0TG9hZGluZyA6ICcnfVxuICAgICAgICAgICR7ZGVzY3JpcHRpb24udmFsdWUgPT09IG51bGwgPyBzdHlsZXMuZGVzY3JpcHRpb25Mb2FkaW5nIDogJyd9YH1cbiAgICAgICAgbGFiZWw9e21ldGEudmVyYm9zZU5hbWV9XG4gICAgICAgIGxhYmVsSW5mbz17YmFja2VuZFZpZXd9PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmJhY2tlbmREZXRhaWxzfT5cbiAgICAgICAge2Rlc2NyaXB0aW9uLnZhbHVlICE9PSBudWxsICYmIEJhY2tlbmREZXRhaWxzICE9PSBudWxsXG4gICAgICAgICAgPyA8QmFja2VuZERldGFpbHNcbiAgICAgICAgICAgICAgZGJJUENQcmVmaXg9e2lwY1ByZWZpeH1cbiAgICAgICAgICAgICAgc3RhdHVzPXtzdGF0dXMgfHwgZGVzY3JpcHRpb24udmFsdWU/LnN0YXR1c31cbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249e2Rlc2NyaXB0aW9uLnZhbHVlfSAvPlxuICAgICAgICAgIDogPGRpdiBjbGFzc05hbWU9e0NsYXNzZXMuU0tFTEVUT059PkxvYWRpbmfigKY8L2Rpdj59XG4gICAgICA8L2Rpdj5cbiAgICA8L0Zvcm1Hcm91cD5cbiAgKTtcbn07XG4iXX0=