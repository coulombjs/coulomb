import { ipcRenderer } from 'electron';
import * as log from 'electron-log';
import React, { useEffect, useState, useMemo } from 'react';
import { FormGroup, Classes } from '@blueprintjs/core';
import { useIPCValue } from '../../ipc/renderer';
import styles from './status.scss';
export const DatabaseList = function ({ databases, databaseStatusComponents }) {
    const dbs = useMemo(() => (Object.entries(databases).map(([dbID, meta]) => {
        const backendDetailsComponentResolver = async () => (await databaseStatusComponents[dbID]()).default;
        return { [dbID]: { meta, backendDetailsComponentResolver } };
    }).reduce((prev, curr) => (Object.assign(Object.assign({}, prev), curr)))), Object.keys(databases));
    return (React.createElement(React.Fragment, null, Object.entries(dbs).map(([dbID, dbData]) => React.createElement(DBStatus, { key: dbID, dbName: dbID, meta: dbData.meta, backendDetailsComponentResolver: dbData.backendDetailsComponentResolver }))));
};
export const DBStatus = function ({ dbName, meta, backendDetailsComponentResolver }) {
    var _a;
    const description = useIPCValue(`db-${dbName}-describe`, null);
    const [status, updateStatus] = useState(null);
    const [BackendDetails, setBackendDetailsComponent] = useState(null);
    const ipcPrefix = `db-${dbName}`;
    // TODO: Redo pluggable backend widget? Move most of the presentation here;
    // make backend provide context provider component with actions & info.
    // Listen to status updates
    function handleNewStatus(evt, newStatus) {
        log.debug("Received new status for DB", dbName, newStatus);
        updateStatus(newStatus);
    }
    useEffect(() => {
        // Fetch component configured to display this DB status appropriately
        (async () => {
            const BackendDetails = (await backendDetailsComponentResolver());
            log.debug("Resolved backend details widget", BackendDetails);
            setBackendDetailsComponent(() => BackendDetails);
        })();
        ipcRenderer.on(`${ipcPrefix}-status`, handleNewStatus);
        return function cleanup() {
            ipcRenderer.removeListener(`${ipcPrefix}-status`, handleNewStatus);
        };
    }, []);
    if (description.value !== null && BackendDetails !== null) {
        log.silly("Rendering DB status widget for", dbName, meta.verboseName, description.value, status);
        log.silly("Using widget", BackendDetails);
    }
    const backendData = description.value;
    const backendView = backendData !== null
        ? React.createElement("span", { className: styles.backendType, title: backendData.verboseNameLong }, backendData.verboseName)
        : React.createElement("span", { className: Classes.SKELETON }, "Loading\u2026");
    return (React.createElement(FormGroup, { className: `
          ${styles.base}
          ${BackendDetails === null ? styles.widgetLoading : ''}
          ${description.value === null ? styles.descriptionLoading : ''}`, label: meta.verboseName, labelInfo: backendView },
        React.createElement("div", { className: styles.backendDetails }, description.value !== null && BackendDetails !== null
            ? React.createElement(BackendDetails, { dbIPCPrefix: ipcPrefix, status: status || ((_a = description.value) === null || _a === void 0 ? void 0 : _a.status), description: description.value })
            : React.createElement("div", { className: Classes.SKELETON }, "Loading\u2026"))));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdHVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2RiL3JlbmRlcmVyL3N0YXR1cy50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUN2QyxPQUFPLEtBQUssR0FBRyxNQUFNLGNBQWMsQ0FBQztBQUVwQyxPQUFPLEtBQUssRUFBRSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLE1BQU0sT0FBTyxDQUFDO0FBQzVELE9BQU8sRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFJdkQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBR2pELE9BQU8sTUFBTSxNQUFNLGVBQWUsQ0FBQztBQVNuQyxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQ3pCLFVBQVUsRUFBRSxTQUFTLEVBQUUsd0JBQXdCLEVBQUU7SUFTL0MsTUFBTSxHQUFHLEdBQWMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ25GLE1BQU0sK0JBQStCLEdBQ25DLEtBQUssSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLHdCQUF3QixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUM7UUFDL0QsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsK0JBQStCLEVBQUUsRUFBRSxDQUFDO0lBQy9ELENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLGlDQUFNLElBQUksR0FBSyxJQUFJLEVBQUcsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFT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RUFBRTtZQUNuRCxXQUFXLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFDakUsS0FBSyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQ3ZCLFNBQVMsRUFBRSxXQUFXO1FBRXhCLDZCQUFLLFNBQVMsRUFBRSxNQUFNLENBQUMsY0FBYyxJQUNsQyxXQUFXLENBQUMsS0FBSyxLQUFLLElBQUksSUFBSSxjQUFjLEtBQUssSUFBSTtZQUNwRCxDQUFDLENBQUMsb0JBQUMsY0FBYyxJQUNiLFdBQVcsRUFBRSxTQUFTLEVBQ3RCLE1BQU0sRUFBRSxNQUFNLFdBQUksV0FBVyxDQUFDLEtBQUssMENBQUUsTUFBTSxDQUFBLEVBQzNDLFdBQVcsRUFBRSxXQUFXLENBQUMsS0FBSyxHQUFJO1lBQ3RDLENBQUMsQ0FBQyw2QkFBSyxTQUFTLEVBQUUsT0FBTyxDQUFDLFFBQVEsb0JBQWdCLENBQ2hELENBQ0ksQ0FDYixDQUFDO0FBQ0osQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXBjUmVuZGVyZXIgfSBmcm9tICdlbGVjdHJvbic7XG5pbXBvcnQgKiBhcyBsb2cgZnJvbSAnZWxlY3Ryb24tbG9nJztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBGb3JtR3JvdXAsIENsYXNzZXMgfSBmcm9tICdAYmx1ZXByaW50anMvY29yZSc7XG5cbmltcG9ydCB7IEFwcENvbmZpZywgRGF0YWJhc2VJbmZvIH0gZnJvbSAnLi4vLi4vY29uZmlnL2FwcCc7XG5pbXBvcnQgeyBSZW5kZXJlckNvbmZpZywgRGF0YWJhc2VTdGF0dXNDb21wb25lbnRQcm9wcyB9IGZyb20gJy4uLy4uL2NvbmZpZy9yZW5kZXJlcic7XG5pbXBvcnQgeyB1c2VJUENWYWx1ZSB9IGZyb20gJy4uLy4uL2lwYy9yZW5kZXJlcic7XG5pbXBvcnQgeyBCYWNrZW5kRGVzY3JpcHRpb24gfSBmcm9tICcuLi9iYXNlJztcblxuaW1wb3J0IHN0eWxlcyBmcm9tICcuL3N0YXR1cy5zY3NzJztcblxuXG50eXBlIFVua25vd25EQlN0YXR1c0NvbXBvbmVudCA9IFJlYWN0LkZDPERhdGFiYXNlU3RhdHVzQ29tcG9uZW50UHJvcHM8YW55LCBhbnk+PjtcblxuaW50ZXJmYWNlIERhdGFiYXNlTGlzdFByb3BzIHtcbiAgZGF0YWJhc2VzOiBBcHBDb25maWdbXCJkYXRhYmFzZXNcIl1cbiAgZGF0YWJhc2VTdGF0dXNDb21wb25lbnRzOiBSZW5kZXJlckNvbmZpZzxhbnk+W1wiZGF0YWJhc2VTdGF0dXNDb21wb25lbnRzXCJdXG59XG5leHBvcnQgY29uc3QgRGF0YWJhc2VMaXN0OiBSZWFjdC5GQzxEYXRhYmFzZUxpc3RQcm9wcz4gPVxuZnVuY3Rpb24gKHsgZGF0YWJhc2VzLCBkYXRhYmFzZVN0YXR1c0NvbXBvbmVudHMgfSkge1xuICB0eXBlIERhdGFiYXNlcyA9IHtcbiAgICBbZGJOYW1lIGluIGtleW9mIHR5cGVvZiBkYXRhYmFzZXNdOiB7XG4gICAgICBtZXRhOiBEYXRhYmFzZUluZm9cbiAgICAgIGJhY2tlbmREZXRhaWxzQ29tcG9uZW50UmVzb2x2ZXI6XG4gICAgICAgICgpID0+IFByb21pc2U8VW5rbm93bkRCU3RhdHVzQ29tcG9uZW50PlxuICAgIH1cbiAgfTtcblxuICBjb25zdCBkYnM6IERhdGFiYXNlcyA9IHVzZU1lbW8oKCkgPT4gKE9iamVjdC5lbnRyaWVzKGRhdGFiYXNlcykubWFwKChbZGJJRCwgbWV0YV0pID0+IHtcbiAgICBjb25zdCBiYWNrZW5kRGV0YWlsc0NvbXBvbmVudFJlc29sdmVyID1cbiAgICAgIGFzeW5jICgpID0+IChhd2FpdCBkYXRhYmFzZVN0YXR1c0NvbXBvbmVudHNbZGJJRF0oKSkuZGVmYXVsdDtcbiAgICByZXR1cm4geyBbZGJJRF06IHsgbWV0YSwgYmFja2VuZERldGFpbHNDb21wb25lbnRSZXNvbHZlciB9IH07XG4gIH0pLnJlZHVjZSgocHJldiwgY3VycikgPT4gKHsgLi4ucHJldiwgLi4uY3VyciB9KSkpLCBPYmplY3Qua2V5cyhkYXRhYmFzZXMpKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7T2JqZWN0LmVudHJpZXMoZGJzKS5tYXAoKFtkYklELCBkYkRhdGFdKSA9PlxuICAgICAgICA8REJTdGF0dXNcbiAgICAgICAgICBrZXk9e2RiSUR9XG4gICAgICAgICAgZGJOYW1lPXtkYklEfVxuICAgICAgICAgIG1ldGE9e2RiRGF0YS5tZXRhfVxuICAgICAgICAgIGJhY2tlbmREZXRhaWxzQ29tcG9uZW50UmVzb2x2ZXI9e2RiRGF0YS5iYWNrZW5kRGV0YWlsc0NvbXBvbmVudFJlc29sdmVyfVxuICAgICAgICAvPil9XG4gICAgPC8+XG4gICk7XG59O1xuXG5cbmludGVyZmFjZSBEQlN0YXR1c1Byb3BzIHtcbiAgZGJOYW1lOiBzdHJpbmdcbiAgbWV0YTogRGF0YWJhc2VJbmZvXG4gIGJhY2tlbmREZXRhaWxzQ29tcG9uZW50UmVzb2x2ZXI6ICgpID0+IFByb21pc2U8VW5rbm93bkRCU3RhdHVzQ29tcG9uZW50PlxufVxuZXhwb3J0IGNvbnN0IERCU3RhdHVzOiBSZWFjdC5GQzxEQlN0YXR1c1Byb3BzPiA9IGZ1bmN0aW9uICh7IGRiTmFtZSwgbWV0YSwgYmFja2VuZERldGFpbHNDb21wb25lbnRSZXNvbHZlciB9KSB7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gdXNlSVBDVmFsdWUoYGRiLSR7ZGJOYW1lfS1kZXNjcmliZWAsIG51bGwgYXMgbnVsbCB8IEJhY2tlbmREZXNjcmlwdGlvbjxhbnk+KTtcbiAgY29uc3QgW3N0YXR1cywgdXBkYXRlU3RhdHVzXSA9IHVzZVN0YXRlKG51bGwgYXMgbnVsbCB8IG9iamVjdCk7XG4gIGNvbnN0IFtCYWNrZW5kRGV0YWlscywgc2V0QmFja2VuZERldGFpbHNDb21wb25lbnRdID0gdXNlU3RhdGUobnVsbCBhcyAobnVsbCB8ICgoKSA9PiBVbmtub3duREJTdGF0dXNDb21wb25lbnQpKSk7XG4gIGNvbnN0IGlwY1ByZWZpeCA9IGBkYi0ke2RiTmFtZX1gO1xuXG4gIC8vIFRPRE86IFJlZG8gcGx1Z2dhYmxlIGJhY2tlbmQgd2lkZ2V0PyBNb3ZlIG1vc3Qgb2YgdGhlIHByZXNlbnRhdGlvbiBoZXJlO1xuICAvLyBtYWtlIGJhY2tlbmQgcHJvdmlkZSBjb250ZXh0IHByb3ZpZGVyIGNvbXBvbmVudCB3aXRoIGFjdGlvbnMgJiBpbmZvLlxuXG4gIC8vIExpc3RlbiB0byBzdGF0dXMgdXBkYXRlc1xuICBmdW5jdGlvbiBoYW5kbGVOZXdTdGF0dXMoZXZ0OiBhbnksIG5ld1N0YXR1czogYW55KSB7XG4gICAgbG9nLmRlYnVnKFwiUmVjZWl2ZWQgbmV3IHN0YXR1cyBmb3IgREJcIiwgZGJOYW1lLCBuZXdTdGF0dXMpO1xuICAgIHVwZGF0ZVN0YXR1cyhuZXdTdGF0dXMpO1xuICB9XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBGZXRjaCBjb21wb25lbnQgY29uZmlndXJlZCB0byBkaXNwbGF5IHRoaXMgREIgc3RhdHVzIGFwcHJvcHJpYXRlbHlcbiAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgQmFja2VuZERldGFpbHMgPSAoYXdhaXQgYmFja2VuZERldGFpbHNDb21wb25lbnRSZXNvbHZlcigpKTtcbiAgICAgIGxvZy5kZWJ1ZyhcIlJlc29sdmVkIGJhY2tlbmQgZGV0YWlscyB3aWRnZXRcIiwgQmFja2VuZERldGFpbHMpXG4gICAgICBzZXRCYWNrZW5kRGV0YWlsc0NvbXBvbmVudCgoKSA9PiBCYWNrZW5kRGV0YWlscyk7XG4gICAgfSkoKTtcblxuICAgIGlwY1JlbmRlcmVyLm9uKGAke2lwY1ByZWZpeH0tc3RhdHVzYCwgaGFuZGxlTmV3U3RhdHVzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICAgIGlwY1JlbmRlcmVyLnJlbW92ZUxpc3RlbmVyKGAke2lwY1ByZWZpeH0tc3RhdHVzYCwgaGFuZGxlTmV3U3RhdHVzKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBpZiAoZGVzY3JpcHRpb24udmFsdWUgIT09IG51bGwgJiYgQmFja2VuZERldGFpbHMgIT09IG51bGwpIHtcbiAgICBsb2cuc2lsbHkoXCJSZW5kZXJpbmcgREIgc3RhdHVzIHdpZGdldCBmb3JcIiwgZGJOYW1lLCBtZXRhLnZlcmJvc2VOYW1lLCBkZXNjcmlwdGlvbi52YWx1ZSwgc3RhdHVzKTtcbiAgICBsb2cuc2lsbHkoXCJVc2luZyB3aWRnZXRcIiwgQmFja2VuZERldGFpbHMpO1xuICB9XG5cbiAgY29uc3QgYmFja2VuZERhdGEgPSBkZXNjcmlwdGlvbi52YWx1ZTtcblxuICBjb25zdCBiYWNrZW5kVmlldzogSlNYLkVsZW1lbnQgPSBiYWNrZW5kRGF0YSAhPT0gbnVsbFxuICAgID8gPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXMuYmFja2VuZFR5cGV9IHRpdGxlPXtiYWNrZW5kRGF0YS52ZXJib3NlTmFtZUxvbmd9PlxuICAgICAgICB7YmFja2VuZERhdGEudmVyYm9zZU5hbWV9XG4gICAgICA8L3NwYW4+XG4gICAgOiA8c3BhbiBjbGFzc05hbWU9e0NsYXNzZXMuU0tFTEVUT059PkxvYWRpbmfigKY8L3NwYW4+O1xuXG4gIHJldHVybiAoXG4gICAgPEZvcm1Hcm91cFxuICAgICAgICBjbGFzc05hbWU9e2BcbiAgICAgICAgICAke3N0eWxlcy5iYXNlfVxuICAgICAgICAgICR7QmFja2VuZERldGFpbHMgPT09IG51bGwgPyBzdHlsZXMud2lkZ2V0TG9hZGluZyA6ICcnfVxuICAgICAgICAgICR7ZGVzY3JpcHRpb24udmFsdWUgPT09IG51bGwgPyBzdHlsZXMuZGVzY3JpcHRpb25Mb2FkaW5nIDogJyd9YH1cbiAgICAgICAgbGFiZWw9e21ldGEudmVyYm9zZU5hbWV9XG4gICAgICAgIGxhYmVsSW5mbz17YmFja2VuZFZpZXd9PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmJhY2tlbmREZXRhaWxzfT5cbiAgICAgICAge2Rlc2NyaXB0aW9uLnZhbHVlICE9PSBudWxsICYmIEJhY2tlbmREZXRhaWxzICE9PSBudWxsXG4gICAgICAgICAgPyA8QmFja2VuZERldGFpbHNcbiAgICAgICAgICAgICAgZGJJUENQcmVmaXg9e2lwY1ByZWZpeH1cbiAgICAgICAgICAgICAgc3RhdHVzPXtzdGF0dXMgfHwgZGVzY3JpcHRpb24udmFsdWU/LnN0YXR1c31cbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249e2Rlc2NyaXB0aW9uLnZhbHVlfSAvPlxuICAgICAgICAgIDogPGRpdiBjbGFzc05hbWU9e0NsYXNzZXMuU0tFTEVUT059PkxvYWRpbmfigKY8L2Rpdj59XG4gICAgICA8L2Rpdj5cbiAgICA8L0Zvcm1Hcm91cD5cbiAgKTtcbn07XG4iXX0=